import{e as z,f as Q,g as Y}from"./chunk-7TNYY5WH.js";import{a as J}from"./chunk-4EMWHUSH.js";import{a as U,c as V,d as q,e as L}from"./chunk-PWXSQGX5.js";import{c as $}from"./chunk-BTRQCZZF.js";import{Ha as w,Ia as b,Ka as D,La as F,Ma as R,Na as d,Pa as M,Sa as A,Ta as B,Wa as O,Xa as P,b as _,ob as j,pb as G,rb as k,sb as H}from"./chunk-6GUNNAMA.js";import{$a as f,Ab as c,Db as I,Jb as o,Kb as i,Lb as m,Rb as C,_ as S,_a as r,cc as s,da as y,dc as u,dd as T,kc as N,lb as x,uc as n,vc as a,wa as E}from"./chunk-X5E3IHQQ.js";var v=class l{constructor(e){this.http=e}baseUrl=U.apiBaseUrl+"/customer";getCustomersPage(e){return this.http.get(`${this.baseUrl}?page=${e.page}&size=${e.size}`)}createCustomer(e){return this.http.post(this.baseUrl,e)}filterCustomersByPhone(e){return this.http.get(`${this.baseUrl}/filter?key=${e}`)}static \u0275fac=function(t){return new(t||l)(y(_))};static \u0275prov=S({token:l,factory:l.\u0275fac,providedIn:"root"})};var g=class{customerId;fullName;email;phone;country;address};var ee=()=>({width:"450px"}),K=class l{constructor(e,t,p){this.customerService=e;this.toast=t;this.translate=p}customerForm;visibleChange=new E;dialogHeader="Add Customer";saveLoading=!1;ngOnInit(){this.initCustomerForm()}initCustomerForm(){this.customerForm=new R({phone:new d(null,[b.required]),fullName:new d(null,[b.required]),email:new d(null),country:new d(null),address:new d(null)})}getCustomerRequest(){let e=new g,t=this.customerForm.value;return e.phone=t.phone,e.fullName=t.fullName,e.email=t.email,e.address=t.address,e.country=t.country,e}onSaveCustomer(){if(!this.customerForm.valid){this.toast.showError(this.translate.instant("REQUIRED_FIELDS_MSG"));return}this.saveLoading=!0,this.customerService.createCustomer(this.getCustomerRequest()).subscribe(e=>{this.saveLoading=!1,e.success&&(this.toast.showSuccess(this.translate.instant("SAVE_SUCCESS")),this.visibleChange.emit(!1))},e=>{this.toast.showError(e.error?.message),this.saveLoading=!1})}onVisibleChange(e){this.visibleChange.emit(e)}static \u0275fac=function(t){return new(t||l)(f(v),f(J),f(V))};static \u0275cmp=x({type:l,selectors:[["app-customer-create-dialog"]],outputs:{visibleChange:"visibleChange"},decls:37,vars:31,consts:[[3,"visibleChange","visible","header","modal"],[3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-4","mb-4"],["for","phone",1,"font-semibold","w-24"],[1,"text-red-500"],["formControlName","phone","pInputText","","id","phone","autocomplete","off",1,"flex-auto"],["for","fullName",1,"font-semibold","w-24"],["formControlName","fullName","pInputText","","id","fullName","autocomplete","off",1,"flex-auto"],["for","email",1,"font-semibold","w-24"],["formControlName","email","pInputText","","id","email","autocomplete","off",1,"flex-auto"],["for","address",1,"font-semibold","w-24"],["formControlName","address","pInputText","","id","address","autocomplete","off",1,"flex-auto"],["for","country",1,"font-semibold","w-24"],["formControlName","country","pInputText","","id","country","autocomplete","off",1,"flex-auto"],[1,"flex","justify-end","gap-2"],["severity","secondary",3,"click","label"],["type","submit",3,"loading","label"]],template:function(t,p){t&1&&(o(0,"p-dialog",0),n(1,"translate"),C("visibleChange",function(W){return p.onVisibleChange(W)}),o(2,"form",1),C("ngSubmit",function(){return p.onSaveCustomer()}),o(3,"div",2)(4,"label",3),s(5),n(6,"translate"),o(7,"span",4),s(8," * "),i()(),m(9,"input",5),i(),o(10,"div",2)(11,"label",6),s(12),n(13,"translate"),o(14,"span",4),s(15," * "),i()(),m(16,"input",7),i(),o(17,"div",2)(18,"label",8),s(19),n(20,"translate"),i(),m(21,"input",9),i(),o(22,"div",2)(23,"label",10),s(24),n(25,"translate"),i(),m(26,"input",11),i(),o(27,"div",2)(28,"label",12),s(29),n(30,"translate"),i(),m(31,"input",13),i(),o(32,"div",14)(33,"p-button",15),n(34,"translate"),C("click",function(){return p.onVisibleChange(!1)}),i(),m(35,"p-button",16),n(36,"translate"),i()()()),t&2&&(I(N(30,ee)),c("visible",!0)("header",a(1,14,"ADD_CUSTOMER"))("modal",!0),r(2),c("formGroup",p.customerForm),r(3),u(a(6,16,"PHONE")),r(7),u(a(13,18,"NAME")),r(7),u(a(20,20,"EMAIL")),r(5),u(a(25,22,"ADDRESS")),r(5),u(a(30,24,"COUNTRY")),r(4),c("label",a(34,26,"CANCEL")),r(2),c("loading",p.saveLoading)("label",a(36,28,"SAVE")))},dependencies:[T,O,M,w,D,F,P,A,B,H,k,$,z,G,j,Y,Q,L,q],encapsulation:2})};export{v as a,K as b};
