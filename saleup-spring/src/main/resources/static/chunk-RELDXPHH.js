import{a as ve,b as xe}from"./chunk-AVFJV4JT.js";import{a as se}from"./chunk-FXAYZTIC.js";import{a as fe}from"./chunk-O3SRXZ6G.js";import{b as le}from"./chunk-LFWRBZZV.js";import{a as me,b as pe}from"./chunk-PNAF5FZM.js";import{A as ne,q as Z,t as ee,u as te,x as ie,y as oe}from"./chunk-SMT4EN3V.js";import"./chunk-XFY4HXS5.js";import"./chunk-ETRWT4GR.js";import"./chunk-KWA6YC6W.js";import{a as Ce}from"./chunk-YIQD4OOL.js";import{a as ge}from"./chunk-RJCMGSDU.js";import{a as ue,b as de}from"./chunk-7SGIY5X6.js";import{a as _e}from"./chunk-JLVC7EHP.js";import"./chunk-BTHN5K7B.js";import{c as U,d as G,e as q}from"./chunk-BVAXM6NJ.js";import{e as ce}from"./chunk-INLTFKLG.js";import{b as re,c as ae}from"./chunk-L5ASE5JY.js";import"./chunk-WRM6PFBH.js";import{a as j,c as W,d as K,h as X,i as Y}from"./chunk-AWHW4APH.js";import{m as D}from"./chunk-ATPXQBBY.js";import{Xa as O,Ya as H,ob as $,pb as z,rb as J,sb as Q}from"./chunk-6PJPRA3Z.js";import{$b as F,Cb as i,Db as o,Eb as l,Ib as v,Kb as x,Lb as C,Pc as A,Ta as r,U as T,Ua as S,Wb as N,Xb as c,Yb as V,Yc as w,Zb as d,ac as B,bc as k,dc as E,eb as R,fb as I,ga as _,ha as g,lb as y,nc as s,oc as m,rc as h,tb as p,wb as P}from"./chunk-JPVIOWP6.js";import"./chunk-EQDQRRRY.js";var Se=()=>["phone","fullName"],Ee=()=>({"min-width":"75rem"}),Te=()=>[10,20,30],Ie=()=>({width:"450px"});function ye(t,n){if(t&1){let e=v();i(0,"div",9)(1,"p-button",10),s(2,"translate"),x("onClick",function(){_(e);let u=C();return g(u.openNew())}),o(),l(3,"p-button",11),s(4,"translate"),o()}if(t&2){let e=C();r(),p("label",m(2,3,"ADD")),r(2),p("label",m(4,5,"DELETE"))("disabled",!e.selectedCustomers||!e.selectedCustomers.length)}}function we(t,n){t&1&&(l(0,"p-button",12),s(1,"translate")),t&2&&p("label",m(1,1,"EXPORT"))}function Me(t,n){if(t&1){let e=v();i(0,"div",13)(1,"h5",14),c(2),s(3,"translate"),o(),i(4,"p-iconfield"),l(5,"p-inputicon",15),i(6,"input",16),s(7,"translate"),x("input",function(u){_(e);let f=C(),b=N(6);return g(f.onGlobalFilter(b,u))}),o()()()}t&2&&(r(2),V(m(3,2,"CUSTOMERS")),r(4),p("placeholder",m(7,4,"SEARCH_PACEHOLDER")))}function Le(t,n){t&1&&(i(0,"tr")(1,"th",17),l(2,"p-tableHeaderCheckbox"),o(),l(3,"th"),i(4,"th",18),c(5),s(6,"translate"),l(7,"p-sortIcon",19),o(),i(8,"th",20),c(9),s(10,"translate"),l(11,"p-sortIcon",21),o(),i(12,"th",22),c(13),s(14,"translate"),l(15,"p-sortIcon",23),o(),i(16,"th",24),c(17),s(18,"translate"),l(19,"p-sortIcon",25),o(),i(20,"th",26),c(21),s(22,"translate"),l(23,"p-sortIcon",27),o(),i(24,"th"),c(25),s(26,"translate"),o()()),t&2&&(r(5),d(" ",m(6,6,"PHONE")," "),r(4),d(" ",m(10,8,"NAME")," "),r(4),d(" ",m(14,10,"EMAIL")," "),r(4),d(" ",m(18,12,"ADDRESS")," "),r(4),d(" ",m(22,14,"COUNTRY")," "),r(4),d(" ",m(26,16,"OPTIONS")," "))}function De(t,n){if(t&1){let e=v();i(0,"tr")(1,"td",17),l(2,"p-tableCheckbox",28),o(),i(3,"td"),l(4,"p-avatar",29),o(),i(5,"td"),c(6),o(),i(7,"td"),c(8),o(),i(9,"td"),c(10),o(),i(11,"td"),c(12),o(),i(13,"td"),c(14),o(),i(15,"td")(16,"div",30)(17,"p-button",31),s(18,"translate"),x("onClick",function(){let u=_(e).$implicit,f=C();return g(f.editCustomer(u))}),o(),i(19,"p-button",32),s(20,"translate"),x("click",function(){let u=_(e).$implicit,f=C();return g(f.deleteCustomer(u))}),o()()()()}if(t&2){let e=n.$implicit;r(2),p("value",e),r(2),p("label",e.fullName.toUpperCase()[0]),r(2),d(" ",e.phone," "),r(2),d(" ",e.fullName," "),r(2),d(" ",e.email," "),r(2),d(" ",e.address," "),r(2),d(" ",e.country," "),r(3),p("pTooltip",m(18,13,"EDIT"))("rounded",!0)("outlined",!0),r(2),p("pTooltip",m(20,15,"DELETE"))("rounded",!0)("outlined",!0)}}function Re(t,n){if(t&1){let e=v();i(0,"app-customer-create-dialog",33),x("visibleChange",function(u){_(e);let f=C();return g(f.toggleDialog(u))}),o()}if(t&2){let e=C();p("customer",e.customer)}}var M=class t{constructor(n,e,a,u){this.customerService=n;this.toast=e;this.confirm=a;this.translate=u}customerDialog=!1;dialogHeader="";loading=!1;pageReq=new fe(0,10);customerList=[];customer;selectedCustomers;cols;mode;ngOnInit(){this.getCustomersPage()}getCustomersPage(){this.loading=!0,this.customerService.getCustomersPage(this.pageReq).subscribe(n=>{n.success&&(this.customerList=n.data.content,this.loading=!1)})}openNew(){this.customer=void 0,this.customerDialog=!0,this.mode="create",this.dialogHeader="ADD_CUSTOMER"}onGlobalFilter(n,e){n.filterGlobal(e.target.value,"contains")}deleteCustomer(n){let e=this.translate.instant("DELETE_ALERT",{name:n.fullName});this.confirm.dialogAlert(e,()=>{this.customerService.deleteCustomer(n.customerId).subscribe(a=>{a.success?(this.toast.showSuccess(this.translate.instant("SAVE_SUCCESS")),this.getCustomersPage()):this.toast.showError(a.message)})})}editCustomer(n){this.customer=n,this.mode=="update",this.customerDialog=!0}toggleDialog(n){this.customerDialog=n}static \u0275fac=function(e){return new(e||t)(S(ve),S(_e),S(Ce),S(U))};static \u0275cmp=R({type:t,selectors:[["app-customer-list"]],decls:16,vars:18,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","customerId","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} customers",3,"selectionChange","value","rows","columns","loading","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],[3,"customer","visibleChange",4,"ngIf"],[1,"flex","items-center","gap-2"],["icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick","label"],["severity","secondary","icon","pi pi-trash","outlined","",3,"label","disabled"],["icon","pi pi-upload","severity","secondary",3,"label"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","fullName"],["field","fullName"],["pSortableColumn","email"],["field","email"],["pSortableColumn","address"],["field","address"],["pSortableColumn","country"],["field","country"],[3,"value"],[3,"label"],[1,"flex","gap-2","items-center"],["icon","pi pi-pencil","tooltipPosition","top",3,"onClick","pTooltip","rounded","outlined"],["icon","pi pi-trash","tooltipPosition","top","severity","danger",3,"click","pTooltip","rounded","outlined"],[3,"visibleChange","customer"]],template:function(e,a){if(e&1){let u=v();i(0,"p-toolbar",6),y(1,ye,5,7,"ng-template",null,0,h)(3,we,2,3,"ng-template",null,1,h),o(),i(5,"p-table",7,2),k("selectionChange",function(b){return _(u),B(a.selectedCustomers,b)||(a.selectedCustomers=b),g(b)}),y(7,Me,8,6,"ng-template",null,3,h)(9,Le,27,18,"ng-template",null,4,h)(11,De,21,17,"ng-template",null,5,h),o(),y(13,Re,1,1,"app-customer-create-dialog",8),l(14,"p-toast")(15,"p-confirmdialog")}e&2&&(r(5),p("value",a.customerList)("rows",10)("columns",a.cols)("loading",a.loading)("paginator",!0)("globalFilterFields",E(14,Se))("tableStyle",E(15,Ee)),F("selection",a.selectedCustomers),p("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",E(16,Te)),r(8),p("ngIf",a.customerDialog),r(2),P(E(17,Ie)))},dependencies:[w,A,ne,Z,ee,te,ie,oe,O,H,Q,J,ae,re,pe,me,z,$,le,ce,Y,X,K,W,de,ue,q,G,se,j,xe],encapsulation:2})};var Pe=[{path:"list",component:M,canActivate:[ge],data:{perms:["perm.access.customer"]}}],L=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=T({imports:[D.forChild(Pe),D]})};var be=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=I({type:t});static \u0275inj=T({imports:[w,L]})};export{be as CustomersModule};
