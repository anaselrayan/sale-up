import{Ac as u,T as l,_a as n,f as a,yc as e}from"./chunk-JPVIOWP6.js";import{a as i,b as o}from"./chunk-EQDQRRRY.js";var c=class s{_config=this.initConfig();_state={staticMenuDesktopInactive:!1,overlayMenuActive:!1,configSidebarVisible:!1,staticMenuMobileActive:!1,menuHoverActive:!1};layoutConfig=n(this._config);layoutState=n(this._state);configUpdate=new a;overlayOpen=new a;menuSource=new a;resetSource=new a;menuSource$=this.menuSource.asObservable();resetSource$=this.resetSource.asObservable();configUpdate$=this.configUpdate.asObservable();overlayOpen$=this.overlayOpen.asObservable();theme=e(()=>this.layoutConfig()?.darkTheme?"light":"dark");isSidebarActive=e(()=>this.layoutState().overlayMenuActive||this.layoutState().staticMenuMobileActive);isDarkTheme=e(()=>this.layoutConfig().darkTheme);getPrimary=e(()=>this.layoutConfig().primary);getSurface=e(()=>this.layoutConfig().surface);isOverlay=e(()=>this.layoutConfig().menuMode==="overlay");transitionComplete=n(!1);initialized=!1;constructor(){u(()=>{this.layoutConfig()&&this.onConfigUpdate()}),u(()=>{let t=this.layoutConfig();if(!this.initialized||!t){this.initialized=!0;return}this.handleDarkModeTransition(t)})}handleDarkModeTransition(t){document.startViewTransition?this.startViewTransition(t):(this.toggleDarkMode(t),this.onTransitionEnd())}startViewTransition(t){document.startViewTransition(()=>{this.toggleDarkMode(t)}).ready.then(()=>{this.onTransitionEnd()}).catch(()=>{})}toggleDarkMode(t){(t||this.layoutConfig()).darkTheme?document.documentElement.classList.add("app-dark"):document.documentElement.classList.remove("app-dark")}onTransitionEnd(){this.transitionComplete.set(!0),setTimeout(()=>{this.transitionComplete.set(!1)})}onMenuToggle(){this.isOverlay()&&(this.layoutState.update(t=>o(i({},t),{overlayMenuActive:!this.layoutState().overlayMenuActive})),this.layoutState().overlayMenuActive&&this.overlayOpen.next(null)),this.isDesktop()?this.layoutState.update(t=>o(i({},t),{staticMenuDesktopInactive:!this.layoutState().staticMenuDesktopInactive})):(this.layoutState.update(t=>o(i({},t),{staticMenuMobileActive:!this.layoutState().staticMenuMobileActive})),this.layoutState().staticMenuMobileActive&&this.overlayOpen.next(null))}isDesktop(){return window.innerWidth>991}isMobile(){return!this.isDesktop()}onConfigUpdate(){this._config=i({},this.layoutConfig()),this.configUpdate.next(this.layoutConfig())}onMenuStateChange(t){this.menuSource.next(t)}reset(){this.resetSource.next(!0)}persistConfig(){sessionStorage.setItem("ui.state",JSON.stringify(this.layoutConfig()))}initConfig(){let t=sessionStorage.getItem("ui.state");return t?JSON.parse(t):{preset:"Aura",primary:"emerald",surface:null,darkTheme:!0,menuMode:"static"}}static \u0275fac=function(r){return new(r||s)};static \u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})};export{c as a};
