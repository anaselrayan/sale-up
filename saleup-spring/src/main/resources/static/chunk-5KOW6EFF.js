import{a as Ve}from"./chunk-DPLKIUJQ.js";import{a as Be,b as Ne}from"./chunk-23JVOHPC.js";import"./chunk-2KPM4YQE.js";import{a as xe,b as Ue}from"./chunk-TDCQJO2P.js";import"./chunk-APHUFVIH.js";import{b as Ie}from"./chunk-I6IL5RWO.js";import{a as ye}from"./chunk-SCWCLCIA.js";import{a as De}from"./chunk-O3SRXZ6G.js";import{b as Fe}from"./chunk-LM2R7CUP.js";import{d as Re,e as Te,f as Me,g as Le}from"./chunk-7TNYY5WH.js";import{B as Se,C as ve,E as _e,q as ce,r as ue,u as fe,x as ge,y as be}from"./chunk-ZWE3YAKD.js";import"./chunk-24EOINCO.js";import{e as he,f as Ce}from"./chunk-HSP7W57C.js";import{a as Pe}from"./chunk-4EMWHUSH.js";import{a as ee,c as te,d as ie,e as re}from"./chunk-PWXSQGX5.js";import{b as we,c as Ee}from"./chunk-BTRQCZZF.js";import{c as oe,d as ne,k as ae,l as le}from"./chunk-CVJAGL52.js";import{m as V}from"./chunk-XJ7XG5EY.js";import{Ha as W,Ia as I,Ka as z,La as J,Ma as K,Na as h,Pa as Q,Sa as X,Ta as Y,Wa as Z,Xa as $,b as G,ob as se,pb as pe,rb as me,sb as de}from"./chunk-6GUNNAMA.js";import{$ as x,$a as w,Ab as d,Db as q,Jb as o,Kb as t,Lb as m,Pb as y,Rb as v,Sb as E,_ as k,_a as r,bc as H,cc as p,da as O,dc as S,dd as T,ec as c,gc as P,hc as B,ic as N,kc as R,lb as j,mb as U,na as g,oa as b,sb as D,uc as n,vc as a,yc as C}from"./chunk-X5E3IHQQ.js";var M=class l{constructor(e){this.http=e}baseUrl=ee.apiBaseUrl+"/user";getUsersPage(e){return this.http.get(`${this.baseUrl}?page=${e.page}&size=${e.size}`)}createUser(e){return this.http.post(this.baseUrl,e)}static \u0275fac=function(i){return new(i||l)(O(G))};static \u0275prov=k({token:l,factory:l.\u0275fac,providedIn:"root"})};var Oe=()=>["username","phone","email"],je=()=>({"min-width":"75rem"}),qe=()=>({width:"450px"});function He(l,e){if(l&1){let i=y();o(0,"div",31)(1,"p-button",32),n(2,"translate"),v("onClick",function(){g(i);let u=E();return b(u.openNew())}),t(),o(3,"p-button",33),n(4,"translate"),v("onClick",function(){g(i);let u=E();return b(u.deleteSelectedUsers())}),t()()}if(l&2){let i=E();r(),d("label",a(2,3,"ADD")),r(2),d("label",a(4,5,"DELETE"))("disabled",!i.selectedUsers||!i.selectedUsers.length)}}function Ge(l,e){l&1&&(m(0,"p-button",34),n(1,"translate")),l&2&&d("label",a(1,1,"EXPORT"))}function We(l,e){if(l&1){let i=y();o(0,"div",35)(1,"h5",36),p(2),n(3,"translate"),t(),o(4,"p-iconfield"),m(5,"p-inputicon",37),o(6,"input",38),n(7,"translate"),v("input",function(u){g(i);let _=E(),f=H(6);return b(_.onGlobalFilter(f,u))}),t()()()}l&2&&(r(2),S(a(3,2,"USERS")),r(4),d("placeholder",a(7,4,"SEARCH_PACEHOLDER")))}function ze(l,e){l&1&&(o(0,"tr")(1,"th",39),m(2,"p-tableHeaderCheckbox"),t(),o(3,"th"),p(4),n(5,"translate"),t(),o(6,"th",40),p(7),n(8,"translate"),m(9,"p-sortIcon",41),t(),o(10,"th",42),p(11),n(12,"translate"),m(13,"p-sortIcon",43),t(),o(14,"th",44),p(15),n(16,"translate"),m(17,"p-sortIcon",45),t(),o(18,"th",46),p(19),n(20,"translate"),m(21,"p-sortIcon",47),t(),o(22,"th",48),p(23),n(24,"translate"),m(25,"p-sortIcon",49),t(),o(26,"th",50),p(27),n(28,"translate"),m(29,"p-sortIcon",51),t()()),l&2&&(r(4),c(" ",a(5,7,"IMAGE")," "),r(3),c(" ",a(8,9,"USERNAME")," "),r(4),c(" ",a(12,11,"ROLE")," "),r(4),c(" ",a(16,13,"PHONE")," "),r(4),c(" ",a(20,15,"EMAIL")," "),r(4),c(" ",a(24,17,"LAST_LOGIN")," "),r(4),c(" ",a(28,19,"IS_LOCKED")," "))}function Je(l,e){if(l&1&&(o(0,"tr")(1,"td",39),m(2,"p-tableCheckbox",52),t(),o(3,"td"),m(4,"p-avatar",53),t(),o(5,"td"),p(6),t(),o(7,"td"),p(8),t(),o(9,"td"),p(10),t(),o(11,"td"),p(12),t(),o(13,"td"),p(14),t(),o(15,"td"),p(16),n(17,"translate"),n(18,"translate"),t()()),l&2){let i=e.$implicit;r(2),d("value",i.userId),r(2),d("label","US"),r(2),c(" ",i.username," "),r(2),c(" ",i.role.roleName," "),r(2),c(" ",i.phone," "),r(2),c(" ",i.email," "),r(2),c(" ",i.lastLoginTime," "),r(2),c(" ",i.locked?a(17,8,"YES"):a(18,10,"NO")," ")}}var L=class l{constructor(e,i,s,u){this.userService=e;this.roleService=i;this.toast=s;this.translate=u}userDialog=!1;dialogHeader="Create User";loading=!1;pageReq=new De(0,10);pageDetails;userList=[];roles=[];user;selectedUsers;cols;userForm;mode;ngOnInit(){this.getUsers(),this.getRoles(),this.initUserForm()}getUsers(){this.userService.getUsersPage(this.pageReq).subscribe(e=>{e.success&&(this.userList=e.data.content,this.pageDetails=e.data.page)})}getRoles(){this.roleService.getAllRoles().subscribe(e=>{e.success&&(this.roles=e.data)})}onPageChange(e){this.pageReq.page=e.page,this.pageReq.size=e.rows,this.getUsers()}initUserForm(){this.userForm=new K({username:new h(null,[I.required]),password:new h(null,[I.required]),passwordConfirm:new h(null,[I.required]),phone:new h(null),email:new h(null),roleId:new h(null,[I.required])})}onSaveUser(){if(this.loading=!0,this.userForm.invalid){this.toast.showWarn(this.translate.instant("REQUIRED_FIELDS_MSG"));return}this.userService.createUser(this.getUserPayload()).subscribe(e=>{e.success&&(this.toast.showSuccess(this.translate.instant("SAVE_SUCCESS")),this.getUsers(),this.userForm.reset(),this.userDialog=!1),this.loading=!1})}getUserPayload(){let e=new FormData,i=this.userForm.value;return this.user&&e.append("userId",i.userId),e.append("username",i.username),e.append("password",i.password),e.append("passwordConfirm",i.passwordConfirm),e.append("phone",i.phone),e.append("email",i.email),e.append("roleId",i.roleId),e}openNew(){this.userDialog=!0}deleteSelectedUsers(){}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}onSelectImage(e){console.log(e)}static \u0275fac=function(i){return new(i||l)(w(M),w(Ve),w(Pe),w(te))};static \u0275cmp=j({type:l,selectors:[["app-user-list"]],decls:61,vars:65,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["styleClass","mb-6"],["dataKey","userId",3,"selectionChange","value","rows","columns","loading","globalFilterFields","tableStyle","selection","rowHover"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords}",3,"onPageChange","first","rows","totalRecords","showCurrentPageReport","showJumpToPageDropdown"],[3,"visibleChange","visible","header","modal"],[3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-4","mb-4"],["for","username",1,"font-semibold","w-24"],["formControlName","username","pInputText","","id","username","autocomplete","off",1,"flex-auto"],[1,"flex","justify-between","items-center","gap-4","mb-4"],["for","role",1,"font-semibold","w-24"],["id","role","appendTo","body","optionLabel","roleName","optionValue","roleId","selectionLimit","1","formControlName","roleId",3,"options","filter","emptyMessage","placeholder"],["for","password",1,"font-semibold","w-24"],["formControlName","password",3,"toggleMask"],["for","passwordConfirm",1,"font-semibold","w-24"],["formControlName","passwordConfirm",3,"toggleMask","feedback"],["for","phone",1,"font-semibold","w-24"],["formControlName","phone","pInputText","","id","phone","autocomplete","off",1,"flex-auto"],["for","email",1,"font-semibold","w-24"],["formControlName","email","pInputText","","id","email","autocomplete","off",1,"flex-auto"],[1,"flex","justify-between","items-center","gap-4","mb-8"],["for","userImage",1,"font-semibold","w-24"],["mode","basic","chooseIcon","pi pi-upload","name","userImage","accept","image/*","maxFileSize","1000000",3,"onSelect","chooseLabel"],[1,"flex","justify-end","gap-2"],["severity","secondary",3,"click","label"],["type","submit",3,"label"],[1,"flex","items-center","gap-2"],["icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick","label"],["severity","secondary","icon","pi pi-trash","outlined","",3,"onClick","label","disabled"],["icon","pi pi-upload","severity","secondary",3,"label"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text",3,"input","placeholder"],[2,"width","3rem"],["pSortableColumn","username"],["field","username"],["pSortableColumn","role"],["field","role"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","email"],["field","email"],["pSortableColumn","lastLoginTime"],["field","lastLoginTime"],["pSortableColumn","locked"],["field","locked"],[3,"value"],[3,"label"]],template:function(i,s){if(i&1){let u=y();o(0,"p-toolbar",6),D(1,He,5,7,"ng-template",null,0,C)(3,Ge,2,3,"ng-template",null,1,C),t(),o(5,"p-table",7,2),N("selectionChange",function(f){return g(u),B(s.selectedUsers,f)||(s.selectedUsers=f),b(f)}),D(7,We,8,6,"ng-template",null,3,C)(9,ze,30,21,"ng-template",null,4,C)(11,Je,19,12,"ng-template",null,5,C),t(),o(13,"p-paginator",8),v("onPageChange",function(f){return g(u),b(s.onPageChange(f))}),t(),o(14,"p-dialog",9),n(15,"translate"),N("visibleChange",function(f){return g(u),B(s.userDialog,f)||(s.userDialog=f),b(f)}),o(16,"form",10),v("ngSubmit",function(){return g(u),b(s.onSaveUser())}),o(17,"div",11)(18,"label",12),p(19),n(20,"translate"),t(),m(21,"input",13),t(),o(22,"div",14)(23,"label",15),p(24),n(25,"translate"),t(),m(26,"p-multiselect",16),n(27,"translate"),n(28,"translate"),t(),o(29,"div",14)(30,"label",17),p(31),n(32,"translate"),t(),m(33,"p-password",18),t(),o(34,"div",14)(35,"label",19),p(36),n(37,"translate"),t(),m(38,"p-password",20),t(),o(39,"div",14)(40,"label",21),p(41),n(42,"translate"),t(),m(43,"input",22),t(),o(44,"div",14)(45,"label",23),p(46),n(47,"translate"),t(),m(48,"input",24),t(),o(49,"div",25)(50,"label",26),p(51),n(52,"translate"),t(),o(53,"p-fileupload",27),n(54,"translate"),v("onSelect",function(f){return g(u),b(s.onSelectImage(f))}),t()(),o(55,"div",28)(56,"p-button",29),n(57,"translate"),v("click",function(){return g(u),b(s.userDialog=!1)}),t(),m(58,"p-button",30),n(59,"translate"),t()()(),m(60,"p-toast")}i&2&&(r(5),d("value",s.userList)("rows",10)("columns",s.cols)("loading",s.loading)("globalFilterFields",R(62,Oe))("tableStyle",R(63,je)),P("selection",s.selectedUsers),d("rowHover",!0),r(8),d("first",s.pageReq.page*s.pageReq.size)("rows",s.pageReq.size)("totalRecords",(s.pageDetails==null?null:s.pageDetails.totalElements)||0)("showCurrentPageReport",!0)("showJumpToPageDropdown",!1),r(),q(R(64,qe)),P("visible",s.userDialog),d("header",a(15,36,"ADD_USER"))("modal",!0),r(2),d("formGroup",s.userForm),r(3),S(a(20,38,"USERNAME")),r(5),S(a(25,40,"ROLE")),r(2),d("options",s.roles)("filter",!0)("emptyMessage",a(27,42,"NO_DATA"))("placeholder",a(28,44,"SELECT_FROM_LIST")),r(5),S(a(32,46,"PASSWORD")),r(2),d("toggleMask",!0),r(3),S(a(37,48,"PASSWORD_CONFIRM")),r(2),d("toggleMask",!0)("feedback",!1),r(3),S(a(42,50,"PHONE")),r(5),S(a(47,52,"EMAIL")),r(5),S(a(52,54,"IMAGE")),r(2),d("chooseLabel",a(54,56,"CHOOSE_FILE")),r(3),d("label",a(57,58,"CANCEL")),r(2),d("label",a(59,60,"SAVE")))},dependencies:[T,_e,fe,ge,be,Se,ve,Z,Q,W,z,J,$,X,Y,de,me,Ee,we,Te,Re,pe,se,Ie,Le,Me,le,ae,ne,oe,Fe,re,ie,ye,ue,ce,Ne,Be,Ce,he,Ue,xe],encapsulation:2})};var Ke=[{path:"list",component:L,pathMatch:"full"}],F=class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=U({type:l});static \u0275inj=x({imports:[V.forChild(Ke),V]})};var Ae=class l{static \u0275fac=function(i){return new(i||l)};static \u0275mod=U({type:l});static \u0275inj=x({imports:[T,F]})};export{Ae as UsersModule};
