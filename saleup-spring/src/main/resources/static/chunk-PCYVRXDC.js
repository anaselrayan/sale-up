import{b as z}from"./chunk-VE5ZA4EI.js";import{a as J}from"./chunk-BGLM7VYL.js";import{a as V,c as q,d as L,e as P}from"./chunk-TGB364TN.js";import{d as Q,e as Y}from"./chunk-N474PGLI.js";import{c as k}from"./chunk-7G2FJQ27.js";import{Ia as _,Ja as v,La as w,Ma as D,Na as F,Oa as d,Qa as M,Ta as A,Ua as O,Xa as U,Ya as B,b as R,ob as H,pb as j,rb as G,sb as $}from"./chunk-AQJP2JMO.js";import{Db as o,Eb as i,Fb as u,Lb as h,U as S,Ua as r,Va as f,Yb as s,Z as E,Zb as p,Zc as T,ec as N,fb as I,oc as a,pc as n,qa as y,ub as c,xb as x}from"./chunk-HRECHPDI.js";var C=class m{constructor(e){this.http=e}baseUrl=V.apiBaseUrl+"/customer";getCustomersPage(e){return this.http.get(`${this.baseUrl}?page=${e.page}&size=${e.size}`)}createCustomer(e){return this.http.post(this.baseUrl,e)}updateCustomer(e){return this.http.put(this.baseUrl,e)}filterCustomersByPhone(e){return this.http.get(`${this.baseUrl}/filter?key=${e}`)}deleteCustomer(e){return this.http.delete(`${this.baseUrl}/${e}`)}static \u0275fac=function(t){return new(t||m)(E(R))};static \u0275prov=S({token:m,factory:m.\u0275fac,providedIn:"root"})};var b=class{customerId;fullName;email;phone;country;address};var ee=()=>({width:"450px"}),K=class m{constructor(e,t,l){this.customerService=e;this.toast=t;this.translate=l}customerForm;visibleChange=new y;dialogHeader="Add Customer";saveLoading=!1;mode="create";customer;ngOnInit(){this.customer&&(this.mode="update"),this.mode==="create"&&(this.dialogHeader=this.translate.instant("ADD_CUSTOMER")),this.initCustomerForm(),this.mode==="update"&&this.customer&&(this.dialogHeader=this.translate.instant("EDIT_CUSTOMER",{name:this.customer.fullName}),this.customerForm.patchValue({phone:this.customer.phone,fullName:this.customer.fullName,email:this.customer.email,country:this.customer.country,address:this.customer.address}))}initCustomerForm(){this.customerForm=new F({phone:new d(null,[v.required]),fullName:new d(null,[v.required]),email:new d(null),country:new d(null),address:new d(null)})}getCustomerRequest(){let e=new b,t=this.customerForm.value;return this.customer&&(e.customerId=this.customer.customerId),e.phone=t.phone,e.fullName=t.fullName,e.email=t.email,e.address=t.address,e.country=t.country,e}onSaveCustomer(){if(!this.customerForm.valid){this.toast.showError(this.translate.instant("REQUIRED_FIELDS_MSG"));return}this.mode==="create"?(this.saveLoading=!0,this.customerService.createCustomer(this.getCustomerRequest()).subscribe(e=>{this.saveLoading=!1,e.success?(this.toast.showSuccess(this.translate.instant("SAVE_SUCCESS")),this.visibleChange.emit(!1)):this.toast.showError(e.message)})):this.mode==="update"&&(this.saveLoading=!0,this.customerService.updateCustomer(this.getCustomerRequest()).subscribe(e=>{this.saveLoading=!1,e.success?(this.toast.showSuccess(this.translate.instant("SAVE_SUCCESS")),this.visibleChange.emit(!1)):this.toast.showError(e.message)}))}onVisibleChange(e){this.visibleChange.emit(e)}static \u0275fac=function(t){return new(t||m)(f(C),f(J),f(q))};static \u0275cmp=I({type:m,selectors:[["app-customer-create-dialog"]],inputs:{mode:"mode",customer:"customer"},outputs:{visibleChange:"visibleChange"},decls:36,vars:29,consts:[[3,"visibleChange","visible","header","modal"],[3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-4","mb-4"],["for","phone",1,"font-semibold","w-24"],[1,"text-red-500"],["formControlName","phone","pInputText","","id","phone","autocomplete","off",1,"flex-auto"],["for","fullName",1,"font-semibold","w-24"],["formControlName","fullName","pInputText","","id","fullName","autocomplete","off",1,"flex-auto"],["for","email",1,"font-semibold","w-24"],["formControlName","email","pInputText","","id","email","autocomplete","off",1,"flex-auto"],["for","address",1,"font-semibold","w-24"],["formControlName","address","pInputText","","id","address","autocomplete","off",1,"flex-auto"],["for","country",1,"font-semibold","w-24"],["formControlName","country","pInputText","","id","country","autocomplete","off",1,"flex-auto"],[1,"flex","justify-end","gap-2"],["severity","secondary",3,"click","label"],["type","submit",3,"loading","label"]],template:function(t,l){t&1&&(o(0,"p-dialog",0),h("visibleChange",function(W){return l.onVisibleChange(W)}),o(1,"form",1),h("ngSubmit",function(){return l.onSaveCustomer()}),o(2,"div",2)(3,"label",3),s(4),a(5,"translate"),o(6,"span",4),s(7," * "),i()(),u(8,"input",5),i(),o(9,"div",2)(10,"label",6),s(11),a(12,"translate"),o(13,"span",4),s(14," * "),i()(),u(15,"input",7),i(),o(16,"div",2)(17,"label",8),s(18),a(19,"translate"),i(),u(20,"input",9),i(),o(21,"div",2)(22,"label",10),s(23),a(24,"translate"),i(),u(25,"input",11),i(),o(26,"div",2)(27,"label",12),s(28),a(29,"translate"),i(),u(30,"input",13),i(),o(31,"div",14)(32,"p-button",15),a(33,"translate"),h("click",function(){return l.onVisibleChange(!1)}),i(),u(34,"p-button",16),a(35,"translate"),i()()()),t&2&&(x(N(28,ee)),c("visible",!0)("header",l.dialogHeader)("modal",!0),r(),c("formGroup",l.customerForm),r(3),p(n(5,14,"PHONE")),r(7),p(n(12,16,"NAME")),r(7),p(n(19,18,"EMAIL")),r(5),p(n(24,20,"ADDRESS")),r(5),p(n(29,22,"COUNTRY")),r(4),c("label",n(33,24,"CANCEL")),r(2),c("loading",l.saveLoading)("label",n(35,26,"SAVE")))},dependencies:[T,U,M,_,w,D,B,A,O,$,G,k,z,j,H,Y,Q,P,L],encapsulation:2})};export{C as a,K as b};
